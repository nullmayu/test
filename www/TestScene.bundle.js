(window.webpackJsonptest=window.webpackJsonptest||[]).push([["TestScene"],{23:function(t,s,e){"use strict";e.r(s),e.d(s,"default",(function(){return l}));var i=e(0),h=e(2),a=e(6);var n=Object.freeze({first:1,middle:2,last:3,end:4}),r=e(4);class o{static createLightGrad(t,s,e){let h=new i.e;return h=e?this.createGradient(t,s,"rgba(255,255,255,0.1)","rgba(100,100,100,0.1)"):this.createGradient(t,s,"rgba(100,100,100,0.1)","rgba(255,255,255,0.1)"),h}static createGradient(t,s,e,h){const a=document.createElement("canvas"),n=a.getContext("2d");if(n){const i=n.createLinearGradient(0,0,0,s);a.setAttribute("width",""+t),a.setAttribute("height",""+s),i.addColorStop(0,e),i.addColorStop(1,h),n.fillStyle=i,n.fillRect(0,0,t,s)}return i.e.from(a)}static createShade(t,s){const e=new i.c;return e.beginFill(16777215,.1),e.drawRect(0,0,t,s),e.endFill(),e}static createBoardFrame(t,s){const e=new i.c;return e.lineStyle(2,0,1,0),e.beginFill(0,0),e.drawRect(0,0,t,s),e.endFill(),e}static createShaft(t){const s=new i.c;return s.beginFill(2763306,.8),s.drawRect(0,0,4,t),s.endFill(),s}static setWordTexture(t){const s=[],e=t.words.concat(""),h=e.length,a=new i.a({width:t.width*h,height:t.height,backgroundColor:0});for(let s=0;s<h;s++){const h=new i.f(e[s]);h.style={fontSize:t.fontsize,fill:16777215},h.anchor.set(.5,.5),h.position.set(t.width*(s+.5),t.height/2),h.width>t.width&&(h.width=t.width),a.stage.addChild(h)}const n=i.g.from(a.view).baseTexture;for(let e=0;e<h;e++){const h=new i.d(t.width*e,0,t.width,t.height/2),a=new i.d(t.width*e,t.height/2,t.width,t.height/2),r=new i.g(n,h),o=new i.g(n,a);s.push(r,o)}return{textures:s,app:a}}}o.words=["あ","い","う","え","お"];class d extends i.b{constructor(t){super(),this.layer=4,this.containers=[],this.shadeUp=new i.c,this.shadeDown=new i.c,this.rotateUp=new i.e,this.rotateDown=new i.e,this.speed=10,this.finished=!0,this.anime=this.Turn(),this.setContainers(),this.textures=t.textures,this.max=this.textures.length/2-1,this.flapW=this.textures[0].width,this.flapH=this.textures[0].height,this.state=n.end,this.nowUpNo=this.max,this.nowDownNo=this.max,this.turnNo=0,this.backUp=this.setSprite(this.max,!0),this.backDown=this.setSprite(this.max,!1),this.setInitial()}setSprite(t,s){if(s){return new i.e(this.textures[2*t])}return new i.e(this.textures[2*t+1])}lessMax(t){return t>this.max?t-this.max-1:t}setInitial(){const t=o.createLightGrad(this.flapW,this.flapH,!0);this.containers[3].addChild(t);const s=o.createLightGrad(this.flapW,this.flapH,!1);s.position.set(0,this.flapH),this.containers[3].addChild(s);const e=o.createBoardFrame(this.flapW,this.flapH);this.containers[3].addChild(e);const i=o.createBoardFrame(this.flapW,this.flapH);this.containers[3].addChild(i),i.position.set(0,this.flapH);const h=o.createShaft(this.flapH/5);this.containers[3].addChild(h),h.position.set(this.flapW/2,.9*this.flapH),this.shadeUp=o.createShade(this.flapW,this.flapH),this.shadeUp.scale.y=0,this.containers[2].addChild(this.shadeUp),this.shadeDown=o.createShade(this.flapW,this.flapH),this.shadeDown.position.set(0,this.flapH),this.shadeDown.scale.y=0,this.containers[2].addChild(this.shadeDown),this.backUp.position.set(0,0),this.containers[0].addChild(this.backUp),this.backDown.position.set(0,this.flapH),this.containers[0].addChild(this.backDown)}setAnime(t){return this.turnNo=this.lessMax(t+this.max+1-this.nowUpNo),this.turnNo>0&&(this.finished=!1),this}*Turn(){this.state=n.first;let t=this.turnNo-1;for(this.setTurnStart(),yield*this.turnFlap(),this.setTurnEnd(),this.state=n.middle;t>0;)this.setTurnStart(),yield*this.turnFlap(),this.setTurnEnd(),t-=1;this.state=n.last,this.setTurnStart(),yield*this.turnFlap(),this.setTurnEnd(),this.state=n.end,this.finished=!0}*turnFlap(){let t=0;for(;t<90;){if(this.state===n.first||this.state===n.middle){const s=Math.cos(t/180*Math.PI);this.shadeUp.y=this.flapH*(1-s),this.shadeUp.scale.y=s*(1-s),this.rotateUp.scale.y=s}if(this.state===n.middle||this.state===n.last){const s=Math.sin(t/180*Math.PI);this.shadeDown.y=this.flapH*(1+s),this.shadeDown.scale.y=s*(1-s),this.rotateDown.scale.y=s}t+=this.speed,yield*r.a.wait(1)}}setTurnStart(){if(this.state!==n.middle&&this.state!==n.last||(this.rotateDown=this.setSprite(this.nowUpNo,!1),this.rotateDown.position.set(0,this.flapH),this.containers[1].addChild(this.rotateDown)),this.state===n.first||this.state===n.middle){this.rotateUp=this.setSprite(this.nowUpNo,!0),this.rotateUp.anchor.set(0,1),this.rotateUp.position.set(0,this.flapH),this.containers[1].addChild(this.rotateUp);const t=this.lessMax(this.nowUpNo+1);this.nowUpNo=t,this.backUp.destroy(),this.backUp=this.setSprite(t,!0),this.containers[0].addChild(this.backUp)}}setTurnEnd(){if(this.state!==n.first&&this.state!==n.middle||(this.rotateUp.destroy(),this.shadeUp.scale.y=0),this.state===n.middle||this.state===n.last){this.rotateDown.destroy(),this.shadeDown.scale.y=0;const t=this.lessMax(this.nowDownNo+1);this.nowDownNo=t,this.backDown.destroy(),this.backDown=this.setSprite(t,!1),this.backDown.position.set(0,this.flapH),this.containers[0].addChild(this.backDown)}}setContainers(){for(let t=0;t<this.layer;t++){const s=new i.b;this.containers[t]=s,this.addChild(s)}}}class l extends a.a{constructor(){super(),this.layer=1,this.setContainers(),this.workapp=new i.a,this.text=new i.f("frame",{fontSize:40,fill:16711680}),this.text.anchor.set(1,0);const t=h.a.instance.app.renderer;this.text.position.set(t.width,0),this.containers[0].addChild(this.text)}load(){super.load();const t=o.setWordTexture({words:o.words,width:1e3,height:300,fontsize:200});this.workapp=t.app;const s=t.textures,e=new d({textures:s});this.containers[0].addChild(e),this.animations.push(e.setAnime(4));const i=new d({textures:s});this.containers[0].addChild(i),i.position.set(0,400),this.animations.push(i.setAnime(3))}finish(){super.finish(),this.workapp.destroy(!0,{children:!0,texture:!0,baseTexture:!0})}update(){super.update(),this.text.text="frame:"+this.frame}}}}]);